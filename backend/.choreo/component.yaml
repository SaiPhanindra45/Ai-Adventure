schemaVersion: "1.2"
name: backend

container:
  # Choreo runtime for Python 3.x
  runtime: python3

  build:
    # Install dependencies from requirements.txt
    commands:
      - pip install --no-cache-dir -r requirements.txt

  start:
    # Run uvicorn (Choreo injects PORT environment variable)
    command: uvicorn
    args:
      - main:app
      - --host=0.0.0.0
      - --port=${PORT}

endpoints:
  - name: rest-api-be2
    displayName: REST API
    type: REST
    networkVisibilities:
      - Project
      - Public
    service:
      basePath: /
      port: 8000
